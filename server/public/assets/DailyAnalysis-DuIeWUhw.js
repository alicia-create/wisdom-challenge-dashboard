import{D as F,t as U,j as t,a as $,B as W,b as B,C as z,c as _,d as H,e as Q,S as Y,f}from"./index-bSk5r2dW.js";import{r as N}from"./router-ClsQZdgV.js";import{D as q}from"./download-CsooGfD7.js";import"./react-vendor-DE-WNy_D.js";import"./ui-Do3QT4vV.js";import"./utils-DXYZFL4c.js";import"./charts-j6iz4hrz.js";function le(){const[y,x]=N.useState(F.LAST_30_DAYS),D=()=>{if(!s||s.length===0){f.error("No data to export");return}const a=["Metric","Total",...s.map(n=>{const[m,r,p]=n.date.split("-").map(Number);return new Date(m,r-1,p).toLocaleDateString("en-US",{month:"short",day:"numeric"})})],l=[];g.forEach((n,m)=>{const r=g[m-1];(!r||r.category!==n.category)&&l.push([n.category,"",...s.map(()=>"")]);const p=[n.label,u(n.totalValue,n.format),...s.map(h=>u(h[n.key],n.format))];l.push(p)});const o=[a.join(","),...l.map(n=>n.map(m=>{const r=String(m);return r.includes(",")||r.includes('"')||r.includes(`
`)?`"${r.replace(/"/g,'""')}`:r}).join(","))].join(`
`),c=new Blob([o],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),I=URL.createObjectURL(c);i.setAttribute("href",I),i.setAttribute("download",`31DWC-Daily-Analysis-${new Date().toISOString().split("T")[0]}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),f.success("CSV exported successfully")},{data:s,isLoading:b}=U.dailyAnalysis.metrics.useQuery({dateRange:y}),V=a=>a===0?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(a),A=a=>a===0?"0.00%":`${a.toFixed(2)}%`,S=a=>a===0?"0":new Intl.NumberFormat("en-US").format(a),e=s?.reduce((a,l)=>({totalOptins:a.totalOptins+l.totalOptins,totalVipSales:a.totalVipSales+l.totalVipSales,totalVipRevenue:a.totalVipRevenue+l.totalVipRevenue,totalSpend:a.totalSpend+l.totalSpend,profitLoss:a.profitLoss+l.profitLoss,metaSpend:a.metaSpend+l.metaSpend,metaOptins:a.metaOptins+l.metaOptins,metaVipSales:a.metaVipSales+l.metaVipSales,metaClicks:a.metaClicks+l.metaClicks,metaImpressions:a.metaImpressions+l.metaImpressions,metaLandingPageViews:a.metaLandingPageViews+l.metaLandingPageViews,googleSpend:a.googleSpend+l.googleSpend,googleOptins:a.googleOptins+l.googleOptins,googleVipSales:a.googleVipSales+l.googleVipSales,googleClicks:a.googleClicks+l.googleClicks,googleImpressions:a.googleImpressions+l.googleImpressions}),{totalOptins:0,totalVipSales:0,totalVipRevenue:0,totalSpend:0,profitLoss:0,metaSpend:0,metaOptins:0,metaVipSales:0,metaClicks:0,metaImpressions:0,metaLandingPageViews:0,googleSpend:0,googleOptins:0,googleVipSales:0,googleClicks:0,googleImpressions:0}),k=e&&e.totalOptins>0?e.totalVipSales/e.totalOptins*100:0,C=e&&e.totalOptins>0?e.totalSpend/e.totalOptins:0,w=e&&e.totalVipSales>0?e.totalSpend/e.totalVipSales:0,R=e&&e.totalSpend>0?e.totalVipRevenue/e.totalSpend:0,P=e&&e.metaOptins>0?e.metaSpend/e.metaOptins:0,O=e&&e.metaVipSales>0?e.metaSpend/e.metaVipSales:0,v=e&&e.metaClicks>0?e.metaLandingPageViews/e.metaClicks*100:0,E=e&&e.metaClicks>0?e.metaOptins/e.metaClicks*100:0,j=e&&e.metaClicks>0?e.metaVipSales/e.metaClicks*100:0,L=e&&e.googleOptins>0?e.googleSpend/e.googleOptins:0,M=e&&e.googleVipSales>0?e.googleSpend/e.googleVipSales:0,T=e&&e.googleClicks>0?e.googleOptins/e.googleClicks*100:0,G=e&&e.googleClicks>0?e.googleVipSales/e.googleClicks*100:0,g=[{category:"游댐 Summary Data",label:"Total Optins",key:"totalOptins",format:"number",totalValue:e?.totalOptins},{category:"游댐 Summary Data",label:"Total Wisdom+ Sales",key:"totalVipSales",format:"number",totalValue:e?.totalVipSales},{category:"游댐 Summary Data",label:"% Wisdom+ Conversion Rate",key:"vipTakeRate",format:"percent",totalValue:k},{category:"游댐 Summary Data",label:"Total Wisdom+ Revenue",key:"totalVipRevenue",format:"currency",totalValue:e?.totalVipRevenue},{category:"游눯 Costs & ROAS",label:"Total Ad Spend",key:"totalSpend",format:"currency",totalValue:e?.totalSpend},{category:"游눯 Costs & ROAS",label:"True Cost Per Lead",key:"trueCPL",format:"currency",totalValue:C},{category:"游눯 Costs & ROAS",label:"True Cost Per Purchase",key:"trueCPP",format:"currency",totalValue:w},{category:"游눯 Costs & ROAS",label:"ROAS (Front-end)",key:"roas",format:"decimal",totalValue:R},{category:"游눯 Costs & ROAS",label:"Front End Profit / Loss",key:"profitLoss",format:"currency",totalValue:e?.profitLoss},{category:"游닉 Meta Ads",label:"Meta Ad Spend",key:"metaSpend",format:"currency",totalValue:e?.metaSpend},{category:"游닉 Meta Ads",label:"Meta Reported CPL",key:"metaCPL",format:"currency",totalValue:P},{category:"游닉 Meta Ads",label:"Meta Reported CPP",key:"metaCPP",format:"currency",totalValue:O},{category:"游닉 Meta Ads",label:"Meta Ad Optins",key:"metaOptins",format:"number",totalValue:e?.metaOptins},{category:"游닉 Meta Ads",label:"Meta Ad Wisdom+ Sales",key:"metaVipSales",format:"number",totalValue:e?.metaVipSales},{category:"游닉 Meta Ads",label:"Meta Clicks",key:"metaClicks",format:"number",totalValue:e?.metaClicks},{category:"游닉 Meta Ads",label:"Meta Impressions",key:"metaImpressions",format:"number",totalValue:e?.metaImpressions},{category:"游닉 Meta Ads",label:"Meta Page Views",key:"metaLandingPageViews",format:"number",totalValue:e?.metaLandingPageViews},{category:"游닉 Meta Ads",label:"Meta Connect Rate",key:"metaConnectRate",format:"percent",totalValue:v},{category:"游닉 Meta Ads",label:"Meta Click to Lead Rate",key:"metaClickToLeadRate",format:"percent",totalValue:E},{category:"游닉 Meta Ads",label:"Meta Click to Purchase Rate",key:"metaClickToPurchaseRate",format:"percent",totalValue:j},{category:"游닉 Google Ads",label:"Google Ad Spend",key:"googleSpend",format:"currency",totalValue:e?.googleSpend},{category:"游닉 Google Ads",label:"Google Reported CPL",key:"googleCPL",format:"currency",totalValue:L},{category:"游닉 Google Ads",label:"Google Reported CPP",key:"googleCPP",format:"currency",totalValue:M},{category:"游닉 Google Ads",label:"Google Ad Optins",key:"googleOptins",format:"number",totalValue:e?.googleOptins},{category:"游닉 Google Ads",label:"Google Ad Wisdom+ Sales",key:"googleVipSales",format:"number",totalValue:e?.googleVipSales},{category:"游닉 Google Ads",label:"Google Clicks",key:"googleClicks",format:"number",totalValue:e?.googleClicks},{category:"游닉 Google Ads",label:"Google Impressions",key:"googleImpressions",format:"number",totalValue:e?.googleImpressions},{category:"游닉 Google Ads",label:"Google Click to Lead Rate",key:"googleClickToLeadRate",format:"percent",totalValue:T},{category:"游닉 Google Ads",label:"Google Click to Purchase Rate",key:"googleClickToPurchaseRate",format:"percent",totalValue:G}],u=(a,l)=>{if(a==null)return"-";switch(l){case"currency":return V(a);case"percent":return A(a);case"number":return S(a);case"decimal":return`${a.toFixed(2)}x`;default:return a.toString()}},d={};return g.forEach(a=>{d[a.category]||(d[a.category]=[]),d[a.category].push(a)}),t.jsxDEV("div",{"data-loc":"client/src/pages/DailyAnalysis.tsx:227",className:"min-h-screen bg-background",children:[t.jsxDEV($,{"data-loc":"client/src/pages/DailyAnalysis.tsx:228"},void 0,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:228,columnNumber:7},this),t.jsxDEV("div",{"data-loc":"client/src/pages/DailyAnalysis.tsx:230",className:"container max-w-full py-6",children:[t.jsxDEV("div",{"data-loc":"client/src/pages/DailyAnalysis.tsx:232",className:"flex justify-between items-center mb-6",children:[t.jsxDEV(W,{"data-loc":"client/src/pages/DailyAnalysis.tsx:233",onClick:D,disabled:b||!s||s.length===0,variant:"outline",className:"gap-2",children:[t.jsxDEV(q,{"data-loc":"client/src/pages/DailyAnalysis.tsx:239",className:"h-4 w-4"},void 0,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:239,columnNumber:13},this),"Export to CSV"]},void 0,!0,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:233,columnNumber:11},this),t.jsxDEV(B,{"data-loc":"client/src/pages/DailyAnalysis.tsx:242",value:y,onChange:x},void 0,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:242,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:232,columnNumber:9},this),t.jsxDEV(z,{"data-loc":"client/src/pages/DailyAnalysis.tsx:246",children:[t.jsxDEV(_,{"data-loc":"client/src/pages/DailyAnalysis.tsx:247",children:t.jsxDEV(H,{"data-loc":"client/src/pages/DailyAnalysis.tsx:248",children:"Daily Metrics"},void 0,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:248,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:247,columnNumber:11},this),t.jsxDEV(Q,{"data-loc":"client/src/pages/DailyAnalysis.tsx:250",children:b?t.jsxDEV(Y,{"data-loc":"client/src/pages/DailyAnalysis.tsx:252",className:"h-[600px] w-full"},void 0,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:252,columnNumber:15},this):t.jsxDEV("div",{"data-loc":"client/src/pages/DailyAnalysis.tsx:254",className:"overflow-x-auto",children:t.jsxDEV("table",{"data-loc":"client/src/pages/DailyAnalysis.tsx:255",className:"w-full border-collapse text-sm",children:[t.jsxDEV("thead",{"data-loc":"client/src/pages/DailyAnalysis.tsx:256",className:"sticky top-0 z-20 bg-background shadow-sm",children:t.jsxDEV("tr",{"data-loc":"client/src/pages/DailyAnalysis.tsx:257",className:"border-b-2 border-border",children:[t.jsxDEV("th",{"data-loc":"client/src/pages/DailyAnalysis.tsx:258",className:"sticky left-0 z-30 bg-background text-left p-3 font-semibold min-w-[250px]",children:"Metric"},void 0,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:258,columnNumber:23},this),t.jsxDEV("th",{"data-loc":"client/src/pages/DailyAnalysis.tsx:261",className:"text-right p-3 font-semibold min-w-[120px] bg-muted",children:"Total"},void 0,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:261,columnNumber:23},this),s?.map(a=>{const[l,o,c]=a.date.split("-").map(Number),i=new Date(l,o-1,c);return t.jsxDEV("th",{"data-loc":"client/src/pages/DailyAnalysis.tsx:269",className:"text-right p-3 font-semibold min-w-[120px] bg-background",children:i.toLocaleDateString("en-US",{month:"short",day:"numeric"})},a.date,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:269,columnNumber:27},this)})]},void 0,!0,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:257,columnNumber:21},this)},void 0,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:256,columnNumber:19},this),t.jsxDEV("tbody",{"data-loc":"client/src/pages/DailyAnalysis.tsx:276",children:Object.entries(d).map(([a,l])=>t.jsxDEV(N.Fragment,{children:[t.jsxDEV("tr",{"data-loc":"client/src/pages/DailyAnalysis.tsx:280",className:"bg-muted/50",children:t.jsxDEV("td",{"data-loc":"client/src/pages/DailyAnalysis.tsx:281",colSpan:2+(s?.length||0),className:"p-3 font-bold text-[#560BAD]",children:a},void 0,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:281,columnNumber:27},this)},void 0,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:280,columnNumber:25},this),l.map((o,c)=>t.jsxDEV("tr",{"data-loc":"client/src/pages/DailyAnalysis.tsx:287",className:c%2===0?"bg-background":"bg-muted/20",children:[t.jsxDEV("td",{"data-loc":"client/src/pages/DailyAnalysis.tsx:288",className:"sticky left-0 z-10 bg-inherit text-left p-3 border-r border-border",children:o.label},void 0,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:288,columnNumber:29},this),t.jsxDEV("td",{"data-loc":"client/src/pages/DailyAnalysis.tsx:291",className:"text-right p-3 font-semibold bg-muted/50",children:u(o.totalValue,o.format)},void 0,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:291,columnNumber:29},this),s?.map(i=>t.jsxDEV("td",{"data-loc":"client/src/pages/DailyAnalysis.tsx:295",className:"text-right p-3",children:u(i[o.key],o.format)},`${i.date}-${o.key}`,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:295,columnNumber:31},this))]},o.key,!0,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:287,columnNumber:27},this))]},a,!0,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:278,columnNumber:23},this))},void 0,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:276,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:255,columnNumber:17},this)},void 0,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:254,columnNumber:15},this)},void 0,!1,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:250,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:246,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:230,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/wisdom-challenge-dashboard/client/src/pages/DailyAnalysis.tsx",lineNumber:227,columnNumber:5},this)}export{le as default};
